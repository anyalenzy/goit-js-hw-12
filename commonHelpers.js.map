{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport errorIcon from '/img/error.svg';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41804111-1b8e3eb7a4ad0f0fdba68370e';\nlet limit;\n\nconst searchParams = {\n  key: API_KEY,\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 40,\n};\n\nconst simpleGallery = new SimpleLightbox('.gallery a', {\n  overlayOpacity: 0.8,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\nform.addEventListener('submit', startSearch);\nloadMoreBtn.addEventListener('click', loadMorePhotos);\n\nasync function startSearch(event) {\n  event.preventDefault();\n  if (!searchInput.value.trim()) {\n    showErrormsg('Please, fill out the search field');\n    return;\n  }\n  gallery.innerHTML = '';\n  searchParams.q = searchInput.value.trim();\n  searchParams.page = 1;\n  hideElem(loadMoreBtn);\n  fetchPhotos();\n}\n\nfunction loadMorePhotos() {\n  searchParams.page += 1;\n  fetchPhotos();\n}\n\nasync function fetchPhotos() {\n  showElem(loader);\n  try {\n    const response = await axios.get(`${BASE_URL}`, { params: searchParams });\n    createGallery(response.data);\n  } catch (error) {\n    showErrormsg(error.message);\n  }\n  hideElem(loader);\n}\n\nfunction createGallery(photos) {\n  if (photos.total === 0) {\n    showErrormsg(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    searchInput.value = '';\n    return;\n  }\n  limit = photos.totalHits;\n  const markup = photos.hits\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n            <div class=\"img-desc\">\n              <span><b>Likes:</b> <br/>${likes}</span>\n              <span><b>Views:</b> <br/>${views}</span>\n              <span><b>Comments:</b> <br/>${comments}</span>\n              <span><b>Downloads:</b> <br/>${downloads}</span>\n            </div>\n          </a>\n        </li>\n                  `;\n      }\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  checkLimit();\n  simpleGallery.refresh();\n  form.reset();\n}\n\nfunction checkLimit() {\n  if (Math.ceil(limit / searchParams.per_page) === searchParams.page) {\n    showErrormsg(\"We're sorry, but you've reached the end of search results.\");\n    hideElem(loadMoreBtn);\n  } else {\n    showElem(loadMoreBtn);\n  }\n}\n\nfunction showErrormsg(msg) {\n  iziToast.show({\n    position: 'topRight',\n    iconUrl: errorIcon,\n    messageColor: '#FAFAFB',\n    messageSize: '16px',\n    backgroundColor: '#EF4040',\n    close: false,\n    closeOnClick: true,\n    closeOnEscape: true,\n    message: msg,\n  });\n}\nfunction showElem(elem) {\n  elem.style.display = 'inline-block';\n}\nfunction hideElem(elem) {\n  elem.style.display = 'none';\n}\n"],"names":["errorIcon","BASE_URL","API_KEY","limit","searchParams","simpleGallery","SimpleLightbox","form","searchInput","gallery","loader","loadMoreBtn","startSearch","loadMorePhotos","event","showErrormsg","hideElem","fetchPhotos","showElem","response","axios","createGallery","error","photos","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","checkLimit","msg","iziToast","elem"],"mappings":"owBAAA,MAAeA,EAAA,2CCKTC,EAAW,2BACXC,EAAU,qCAChB,IAAIC,EAEJ,MAAMC,EAAe,CACnB,IAAKF,EACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACZ,EAEMG,EAAgB,IAAIC,EAAe,aAAc,CACrD,eAAgB,GAChB,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAE3DJ,EAAK,iBAAiB,SAAUK,CAAW,EAC3CD,EAAY,iBAAiB,QAASE,CAAc,EAEpD,eAAeD,EAAYE,EAAO,CAEhC,GADAA,EAAM,eAAc,EAChB,CAACN,EAAY,MAAM,OAAQ,CAC7BO,EAAa,mCAAmC,EAChD,MACD,CACDN,EAAQ,UAAY,GACpBL,EAAa,EAAII,EAAY,MAAM,KAAI,EACvCJ,EAAa,KAAO,EACpBY,EAASL,CAAW,EACpBM,GACF,CAEA,SAASJ,GAAiB,CACxBT,EAAa,MAAQ,EACrBa,GACF,CAEA,eAAeA,GAAc,CAC3BC,EAASR,CAAM,EACf,GAAI,CACF,MAAMS,EAAW,MAAMC,EAAM,IAAI,GAAGnB,IAAY,CAAE,OAAQG,CAAY,CAAE,EACxEiB,EAAcF,EAAS,IAAI,CAC5B,OAAQG,EAAP,CACAP,EAAaO,EAAM,OAAO,CAC3B,CACDN,EAASN,CAAM,CACjB,CAEA,SAASW,EAAcE,EAAQ,CAC7B,GAAIA,EAAO,QAAU,EAAG,CACtBR,EACE,0EACN,EACIP,EAAY,MAAQ,GACpB,MACD,CACDL,EAAQoB,EAAO,UACf,MAAMC,EAASD,EAAO,KACnB,IACC,CAAC,CACC,cAAAE,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,qBAEMN;AAAA,8CACyBC,WAAsBC;AAAA;AAAA,yCAE3BC;AAAA,yCACAC;AAAA,4CACGC;AAAA,6CACCC;AAAA;AAAA;AAAA;AAAA,mBAMxC,EACA,KAAK,EAAE,EACVtB,EAAQ,mBAAmB,YAAae,CAAM,EAC9CQ,IACA3B,EAAc,QAAO,EACrBE,EAAK,MAAK,CACZ,CAEA,SAASyB,GAAa,CAChB,KAAK,KAAK7B,EAAQC,EAAa,QAAQ,IAAMA,EAAa,MAC5DW,EAAa,4DAA4D,EACzEC,EAASL,CAAW,GAEpBO,EAASP,CAAW,CAExB,CAEA,SAASI,EAAakB,EAAK,CACzBC,EAAS,KAAK,CACZ,SAAU,WACV,QAASlC,EACT,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,MAAO,GACP,aAAc,GACd,cAAe,GACf,QAASiC,CACb,CAAG,CACH,CACA,SAASf,EAASiB,EAAM,CACtBA,EAAK,MAAM,QAAU,cACvB,CACA,SAASnB,EAASmB,EAAM,CACtBA,EAAK,MAAM,QAAU,MACvB"}